CREATE TABLE PMIS_RES.PostponeRes(PostponeResID number NOT NULL,
                                  PostponeYear number,
                                  MilitaryDepartmentID number,
                               
                                  CreatedBy number,
                                  CreatedDate date,
                                  LastModifiedBy number,
                                  LastModifiedDate date);

ALTER TABLE PMIS_RES.PostponeRes ADD CONSTRAINT PostponeRes_PK PRIMARY KEY (PostponeResID);
ALTER TABLE PMIS_RES.PostponeRes ADD CONSTRAINT PostponeRes_UNQ UNIQUE (PostponeYear, MilitaryDepartmentID);
ALTER TABLE PMIS_RES.PostponeRes ADD CONSTRAINT PostponeRes_MilDepartment_FK FOREIGN KEY (MilitaryDepartmentID) REFERENCES PMIS_ADM.MilitaryDepartments (MilitaryDepartmentID);

CREATE SEQUENCE PMIS_RES.PostponeRes_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_RES.TRG_PostponeRes_INSERT
BEFORE INSERT ON PMIS_RES.PostponeRes
FOR EACH ROW
BEGIN
   SELECT PMIS_RES.PostponeRes_ID_SEQ.nextval INTO :new.PostponeResID FROM dual;
END;
/
