CREATE TABLE PMIS_RES.PostponeTechItems(PostponeTechItemID number NOT NULL,
                                        PostponeTechCompanyID number NOT NULL,
                                        TechnicsSubTypeID number NOT NULL,
                                        PostponeAbsolutely number,
                                        PostponeConditioned number
                                       );

ALTER TABLE PMIS_RES.PostponeTechItems ADD CONSTRAINT PostponeTechItems_PK PRIMARY KEY (PostponeTechItemID);
ALTER TABLE PMIS_RES.PostponeTechItems ADD CONSTRAINT PostponeTechItems_UNQ UNIQUE (PostponeTechCompanyID, TechnicsSubTypeID);
ALTER TABLE PMIS_RES.PostponeTechItems ADD CONSTRAINT PostponeTechItems_PTechComp_FK FOREIGN KEY (PostponeTechCompanyID) REFERENCES PMIS_RES.PostponeTechCompanies (PostponeTechCompanyID);
ALTER TABLE PMIS_RES.PostponeTechItems ADD CONSTRAINT PostponeTechItems_TSubTypes_FK FOREIGN KEY (TechnicsSubTypeID) REFERENCES PMIS_RES.TechnicsSubTypes (TechnicsSubTypeID);

CREATE SEQUENCE PMIS_RES.PostponeTechItems_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_RES.TRG_PostponeTechItems_INSERT
BEFORE INSERT ON PMIS_RES.PostponeTechItems
FOR EACH ROW
BEGIN
   SELECT PMIS_RES.PostponeTechItems_ID_SEQ.nextval INTO :new.PostponeTechItemID FROM dual;
END;
/
