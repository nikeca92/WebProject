CREATE TABLE PMIS_ADM.Addresses(AddressID number NOT NULL,
								CityID number,
								DistrictID number,
								PostCode varchar2(10),
								AddressText varchar2(1500)
							   );
											 
ALTER TABLE PMIS_ADM.Addresses ADD CONSTRAINT Addresses_PK PRIMARY KEY(AddressID);
ALTER TABLE PMIS_ADM.Addresses ADD CONSTRAINT Addresses_CityID_FK FOREIGN KEY (CityID) REFERENCES UKAZ_OWNER.KL_NMA (Kod_Nma);
ALTER TABLE PMIS_ADM.Addresses ADD CONSTRAINT Addresses_DistrictID_FK FOREIGN KEY (DistrictID) REFERENCES UKAZ_OWNER.Districts (DistrictID);

CREATE SEQUENCE PMIS_ADM.Addresses_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_ADM.TRG_Addresses_INSERT
BEFORE INSERT ON PMIS_ADM.Addresses
FOR EACH ROW
BEGIN
   SELECT PMIS_ADM.Addresses_ID_SEQ.nextval INTO :new.AddressID FROM dual;
END;
/

COMMIT;
/
