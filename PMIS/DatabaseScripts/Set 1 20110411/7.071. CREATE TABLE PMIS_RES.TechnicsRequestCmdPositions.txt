CREATE TABLE PMIS_RES.TechnicsRequestCmdPositions (TechnicsRequestCmdPositionID number NOT NULL,
                                                   TechRequestsCommandID number NOT NULL,
                                                   TechnicsTypeID number NOT NULL,
                                                   TComment varchar2(1000),
                                                   Count number NOT NULL
                                                   );

ALTER TABLE PMIS_RES.TechnicsRequestCmdPositions ADD CONSTRAINT TechnicsRequestCmdPositions_PK PRIMARY KEY (TechnicsRequestCmdPositionID);
ALTER TABLE PMIS_RES.TechnicsRequestCmdPositions ADD CONSTRAINT TechReqCmdPos_TechReqCmds_FK FOREIGN KEY (TechRequestsCommandID) REFERENCES PMIS_RES.TechnicsRequestCommands (TechRequestsCommandID);
ALTER TABLE PMIS_RES.TechnicsRequestCmdPositions ADD CONSTRAINT TechReqCmdPos_TechTypes_FK FOREIGN KEY (TechnicsTypeID) REFERENCES PMIS_RES.TechnicsTypes (TechnicsTypeID);


CREATE SEQUENCE PMIS_RES.TechRequestCmdPositions_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_RES.TRG_TechRequestCmdPos_INSERT
BEFORE INSERT ON PMIS_RES.TechnicsRequestCmdPositions
FOR EACH ROW
BEGIN
   SELECT PMIS_RES.TechRequestCmdPositions_ID_SEQ.nextval INTO :new.TechnicsRequestCmdPositionID FROM dual;
END;
/
