CREATE TABLE PMIS_RES.TechRequestCmdPositionsMilDept ( TechReqCmdPositionsMilDeptID number NOT NULL,
						                               TechnicsRequestCmdPositionID number NOT NULL,
						                               MilitaryDepartmentID number NOT NULL,
	                                                   Count number
        	                                         );

ALTER TABLE PMIS_RES.TechRequestCmdPositionsMilDept ADD CONSTRAINT TechReqCmdPosMilDept_PK PRIMARY KEY (TechReqCmdPositionsMilDeptID);
ALTER TABLE PMIS_RES.TechRequestCmdPositionsMilDept ADD CONSTRAINT TechReqCmdPosMD_TReqCmdPos_FK FOREIGN KEY (TechnicsRequestCmdPositionID) REFERENCES PMIS_RES.TechnicsRequestCmdPositions (TechnicsRequestCmdPositionID);
ALTER TABLE PMIS_RES.TechRequestCmdPositionsMilDept ADD CONSTRAINT TechReqCmdPosMD_MilDept_FK FOREIGN KEY (MilitaryDepartmentID) REFERENCES PMIS_ADM.MilitaryDepartments (MilitaryDepartmentID);


CREATE SEQUENCE PMIS_RES.TechReqCmdPosMilDept_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_RES.TRG_TechReqCmdPosMD_INSERT
BEFORE INSERT ON PMIS_RES.TechRequestCmdPositionsMilDept
FOR EACH ROW
BEGIN
   SELECT PMIS_RES.TechReqCmdPosMilDept_ID_SEQ.nextval INTO :new.TechReqCmdPositionsMilDeptID FROM dual;
END;
/
