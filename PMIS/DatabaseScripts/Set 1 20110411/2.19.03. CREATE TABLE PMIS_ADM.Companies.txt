CREATE TABLE PMIS_ADM.Companies(CompanyID number NOT NULL,
                                OwnershipTypeID number NOT NULL,
                                UnifiedIdentityCode varchar2(50),
                                CompanyName varchar2(500),
                                CityID number,
                                DistrictID number,
                                Address varchar2(1500),
                                Phone varchar2(50)
                               );

ALTER TABLE PMIS_ADM.Companies ADD CONSTRAINT Companies_PK PRIMARY KEY(CompanyID);
ALTER TABLE PMIS_ADM.Companies ADD CONSTRAINT Companies_City_FK FOREIGN KEY (CityID) REFERENCES UKAZ_OWNER.KL_NMA (KOD_NMA);
ALTER TABLE PMIS_ADM.Companies ADD CONSTRAINT Companies_District_FK FOREIGN KEY (DistrictID) REFERENCES PMIS_ADM.Districts (DistrictID);
ALTER TABLE PMIS_ADM.Companies ADD CONSTRAINT Companies_OwnershipType_FK FOREIGN KEY (OwnershipTypeID) REFERENCES PMIS_ADM.OwnershipTypes (OwnershipTypeID);

CREATE SEQUENCE PMIS_ADM.Companies_ID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

CREATE TRIGGER PMIS_ADM.TRG_Companies_INSERT
BEFORE INSERT ON PMIS_ADM.Companies
FOR EACH ROW
BEGIN
   SELECT PMIS_ADM.Companies_ID_SEQ.nextval INTO :new.CompanyID FROM dual;
END;
/