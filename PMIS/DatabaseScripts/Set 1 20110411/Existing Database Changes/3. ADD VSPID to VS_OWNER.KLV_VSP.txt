ALTER TABLE VS_OWNER.KLV_VSP ADD VSPID number;
ALTER TABLE VS_OWNER.KLV_VSP ADD IsActive number(1) CHECK (IsActive BETWEEN 0 AND 1);

ALTER TABLE VS_OWNER.KLV_VSP ADD CONSTRAINT VSPID_UNQ UNIQUE (VSPID);

CREATE SEQUENCE VS_OWNER.KLV_VSP_VSPID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

UPDATE VS_OWNER.KLV_VSP SET VSPID = VS_OWNER.KLV_VSP_VSPID_SEQ.nextval;
UPDATE VS_OWNER.KLV_VSP SET IsActive = 1;

CREATE TRIGGER VS_OWNER.TRG_KLV_VSP_INSERT
BEFORE INSERT ON VS_OWNER.KLV_VSP
FOR EACH ROW
BEGIN
   SELECT VS_OWNER.KLV_VSP_VSPID_SEQ.nextval INTO :new.VSPID FROM dual;
END;
/

INSERT INTO VS_OWNER.KLV_VSP(VSP_KOD, VSP_IME, IsActive)
VALUES ('-', 'ОУ на тактическите подразделения от СВ', 1);

INSERT INTO VS_OWNER.KLV_VSP(VSP_KOD, VSP_IME, IsActive)
VALUES ('\', 'ОУ на тактическите подразделения от ВВС', 1);

INSERT INTO VS_OWNER.KLV_VSP(VSP_KOD, VSP_IME, IsActive)
VALUES (';', 'ОУ на тактическите за ЛО', 1);

INSERT INTO VS_OWNER.KLV_VSP(VSP_KOD, VSP_IME, IsActive)
VALUES ('`', 'ОУ на КИС в тактическите подразделения', 1);

COMMIT;
/

ALTER TABLE VS_OWNER.KLV_VSP MODIFY (VSPID number NOT NULL,
                                     IsActive number(1) DEFAULT 1 NOT NULL CHECK (IsActive BETWEEN 0 AND 1));
/