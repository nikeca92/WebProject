/*SYS_C009247*/
ALTER TABLE VS_OWNER.VS_LS DROP CONSTRAINT &&KOD_KZV_CHECK_CONSTRAINT_NAME;
  
ALTER TABLE VS_OWNER.VS_LS ADD CONSTRAINT &&KOD_KZV_CHECK_CONSTRAINT_NAME CHECK ( kod_kzv IN ( 'Н' , 'О' , 'З' , 'К', 'А', 'У', 'Р' ) );  
  
ALTER TABLE VS_OWNER.VS_LS DROP CONSTRAINT VS_LS_VPODEL_CHK;
  
ALTER TABLE VS_OWNER.VS_LS ADD CONSTRAINT VS_LS_VPODEL_CHK CHECK (       
    ((KOD_KZV='К' OR KOD_KZV='Н' ) AND V_PODELENIE IS NOT NULL) OR        
      (KOD_KZV='З' AND V_PODELENIE IS NULL AND V_KOMANDA  IS NOT NULL) OR        
      (KOD_KZV='О' AND V_PODELENIE IS NULL AND V_KOMANDA  IS NULL                                 
        AND KOD_PSO IS NOT NULL) 
     OR KOD_KZV='А'    
     OR KOD_KZV='У'
     OR KOD_KZV='Р' );
		
COMMIT;
/