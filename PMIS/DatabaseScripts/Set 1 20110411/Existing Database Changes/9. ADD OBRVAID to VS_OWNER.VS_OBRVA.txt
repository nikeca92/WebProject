ALTER TABLE VS_OWNER.VS_OBRVA ADD OBRVAID number;

ALTER TABLE VS_OWNER.VS_OBRVA ADD CONSTRAINT OBRVAID_UNQ UNIQUE (OBRVAID);

CREATE SEQUENCE VS_OWNER.VS_OBRVA_OBRVAID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

UPDATE VS_OWNER.VS_OBRVA SET OBRVAID = VS_OWNER.VS_OBRVA_OBRVAID_SEQ.nextval;

CREATE TRIGGER VS_OWNER.TRG_VS_OBRVA_INSERT
BEFORE INSERT ON VS_OWNER.VS_OBRVA
FOR EACH ROW
BEGIN
   SELECT VS_OWNER.VS_OBRVA_OBRVAID_SEQ.nextval INTO :new.OBRVAID FROM dual;
END;
/

COMMIT;
/

ALTER TABLE VS_OWNER.VS_OBRVA MODIFY (OBRVAID number NOT NULL);
/
