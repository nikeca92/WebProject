ALTER TABLE VS_OWNER.VS_AR_DLO ADD ARDLOID number;

ALTER TABLE VS_OWNER.VS_AR_DLO ADD CONSTRAINT ARDLOID_UNQ UNIQUE (ARDLOID);



ALTER TABLE VS_OWNER.VS_AR_DLO ADD ARDLO_MILITARYDEPARTMENTID number;

GRANT ALL ON PMIS_ADM.MILITARYDEPARTMENTS TO VS_OWNER;

ALTER TABLE VS_OWNER.VS_AR_DLO ADD CONSTRAINT ARDLO_MILITARYDEPARTMENTID_FK FOREIGN KEY (ARDLO_MILITARYDEPARTMENTID) REFERENCES PMIS_ADM.MILITARYDEPARTMENTS (MILITARYDEPARTMENTID);



CREATE SEQUENCE VS_OWNER.VS_AR_DLO_ARDLOID_SEQ
START WITH 1 
INCREMENT BY 1 
NOMAXVALUE;

UPDATE VS_OWNER.VS_AR_DLO SET ARDLOID = VS_OWNER.VS_AR_DLO_ARDLOID_SEQ.nextval;

CREATE TRIGGER VS_OWNER.TRG_VS_AR_DLO_INSERT
BEFORE INSERT ON VS_OWNER.VS_AR_DLO
FOR EACH ROW
BEGIN
   SELECT VS_OWNER.VS_AR_DLO_ARDLOID_SEQ.nextval INTO :new.ARDLOID FROM dual;
END;
/

COMMIT;
/

ALTER TABLE VS_OWNER.VS_AR_DLO MODIFY (ARDLOID number NOT NULL);
/
